
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>the fancy part of the web</title>
  <meta name="author" content="Tolleiv Nietsch">

  
  <meta name="description" content="A nice thing to have at hand is definately Signal and Slots. I heard Felix talking about them quite often and I finally found a nice usecase and came &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tolleiv.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="the fancy part of the web" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tolleiv.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2011/11/30/signal-slots-in-extbase/">Signal / Slots in Extbase</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2011-11-30T18:17:02+01:00" pubdate data-updated="true">Nov 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A nice thing to have at hand is definately <a href="http://en.wikipedia.org/wiki/Signals_and_slots">Signal and Slots</a>. I heard <a href="http://f.oer.tel">Felix</a> talking about them quite often and I finally found a nice usecase and came to play with them a little bit this afternoon. And just to avoid that others have to look around too much to find how they can get them to work here&rsquo;s how it&rsquo;s working for me.</p>

<p>First of all you should understand the concept. This nice little &ldquo;definition&rdquo; (from <a href="http://flow3.typo3.org/documentation/guide/partiii/signalsandslots.html">flow3.typo3.org</a>) sums it up pretty well:</p>

<blockquote><p>A signal, which contains event information as it makes sense in the case at hand, can be emitted (sent) by any part of the code and is received by one or more slots, which can be any function<del> in FLOW3</del> in extbase.</p></blockquote>

<p>To get this running in extbase, you&rsquo;ve to get hold of the <em>Tx_Extbase_SignalSlot_Dispatcher</em>, which is the central instance to manage all of it. Within Extbase that&rsquo;s done easily with this snippet within your classes:</p>

<pre><code>   ...
    /**
     * @var Tx_Extbase_SignalSlot_Dispatcher
     */
    protected $signalSlotDispatcher;

    /**
     * @param Tx_Extbase_SignalSlot_Dispatcher $signalSlotDispatcher
     */
    public function injectSignalSlotDispatcher(Tx_Extbase_SignalSlot_Dispatcher $signalSlotDispatcher) {
        $this-&gt;signalSlotDispatcher = $signalSlotDispatcher;
    }
   ...
</code></pre>

<p>Next thing is to make use of it. The Slot (listener) part could look like one of following blocks. In all cases you define the Signal by it&rsquo;s class (not necessarily a PHP Class) and it&rsquo;s name. Next to that the Slot can either be defined by a Closure, an object with a method name or a PHP-Class and a method name.</p>

<pre><code>   ...
// Using a closure
$this-&gt;signalSlotDispatcher-&gt;connect(
      'Crunching', 'emitDataReady', function($data) { crunch($data) }, NULL, FALSE
);
   ...
// Using a method of the current object
$this-&gt;signalSlotDispatcher-&gt;connect(
     'Crunching', 'emitDataReady', $this, 'crunch', FALSE
);
   ...
// Using a method of the specified class
$this-&gt;signalSlotDispatcher-&gt;connect(
     'Crunching', 'emitDataReady', 'Cruncher', 'crunch', FALSE
);
   ...
</code></pre>

<p>To trigger the Signal which invokes the Slots registered above, you&rsquo;ve to run the following code.</p>

<pre><code>$this-&gt;signalSlotDispatcher-&gt;dispatch('Crunching', 'emitDataReady', array($data));
</code></pre>

<p>One thing I found was that by default the <em>Tx_Extbase_SignalSlot_Dispatcher</em> it not a Singleton in older extbase versions. Bastian fixed that already in the <a href="https://review.typo3.org/#change,6785">master</a> and <a href="https://review.typo3.org/#change,6786">1-4</a> branches and lucky enough this change was part within the TYPO3 4.6.1 release. But I think it&rsquo;s still important to mention that this wasn&rsquo;t the default from the beginning on.</p>

<p>Even if <a href="http://flow3.typo3.org/documentation/guide/partiii/signalsandslots.html">AOP is a nicer way to implement this feature</a>, the extbase backport still works pretty straigh forward.</p>

<p>Edit: One thing I&rsquo;ve to add &ndash; Felix is not &ldquo;just&rdquo; talking about Signal/Slots &ndash; he&rsquo;s the one to thank for the <a href="https://review.typo3.org/1563">backport</a>. And now that his <a href="http://blog.foertel.com/2011/10/using-signalslots-in-extbase/">blog</a> is running again &ndash; this post seems like a summary ;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2011/02/24/release-reviews-templavoila-imagemap_wizard-workspaces/">Release Reviews (Templavoila, Imagemap_wizard, Workspaces)</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2011-02-24T22:17:14+01:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just push the TER upload button two times and in addition to that TYPO3 4.5.2 will be released tomorrow containing some nice workspaces updates. So here&rsquo;s a short summary what happened in the extension releases.</p>

<p><strong>TemplaVoila 1.5.4</strong>
The current release focussed on 4.5 compatibility. It uses the new sys_language flag &ldquo;format&rdquo; to support sprites, it hooks into the new backend-form <em>(TCA)</em> &ldquo;layout&rdquo; and add&rsquo;s it&rsquo;s fields to the right tabs within the backend forms and adjusts everything to work fine with the new CSRF mechanism.</p>

<p>Besides that bug fixes for the section index, performance improvements and a couple more are included.</p>

<p><em>One thing in conjunction with 4.5 you should be aware of is that copied elements are hidden by default. In older versions hidden elements won&rsquo;t show up in the page module by default and therefore it might seem that nothing was copied, but that&rsquo;s not right. With 1.5.4 the default setting was changed so hidden elements will show up in the page module. Unfortunately the old setting (to skip hidden elements) might still be present in your session settings &ndash; so please either clear your session settings or use the &ldquo;Advanced function&rdquo; tab in the page module to change to setting and avoid confusion.</em></p>

<p><strong>Imagemap_wizard 0.6.0</strong>
The last versions proved to be very stable and with some additional sponsoring I was able to improve the DAM and TYPO3 workspaces support. Besides that a couple of issues which showed up in 4.4 and 4.5 were fixed. One of the next features will hopefully be a useful point of interest implementation &ndash; keep your fingers crossed that someone&rsquo;s clients want&rsquo;s to sponsor some time for that ;)</p>

<p><strong>Workspaces 4.5.1 / 4.5.2</strong>
Even if it&rsquo;s shipped with the Core and included in the <a href="http://news.typo3.org/news/article/typo3-451-released/">official release notes</a>, here&rsquo;s my summary of the improvements. The workspace module itself brought us lot&rsquo;s of good feedback and also the new workspace preview raised some attention. Even though 4.5.0 was quite stable we weren&rsquo;t able to get it working perfectly. The fixes made for 4.5.1 made sure that especially the preview window works much more stable, it introduced state persistence (so switching preview modes or module settings are memorized properly) and it brought some performance improvements.
Btw. if you didn&rsquo;t check out the new workspaces features and improvements the<a href="http://forge.typo3.org/projects/typo3v4-workspaces/repository/entry/workspaces/trunk/Documentation/manual.pdf"> new workspaces documentation from Susanne Moog</a> is a good point to start.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/11/18/typo3-4-5-beta1/">TYPO3 4.5 Beta1</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-11-18T22:48:31+01:00" pubdate data-updated="true">Nov 18<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As announced on <a href="http://news.typo3.org/news/article/typo3-45beta1-released/">news.typo3.org</a> yesterday the TYPO3 Core team published TYPO3 4.5 beta. With this beta the features for the next version are fixed and the remaining time until the release will be used for polishing and bug fixing.
A complete list of the included features and changes can be found on <a href="http://forge.typo3.org/projects/typo3v45-projects/wiki/TYPO3_450beta1">forge.typo3.org</a>.</p>

<p>As member of the <a href="http://blog.tolleiv.de/2010/06/typo3-workspaces/">TYPO3 workspace team</a> I&rsquo;d like to encourage everyone to send as much feedback as possible for all the workspace related changes and since <a href="http://blog.tolleiv.de/2010/10/templavoila-1-5-released/">maintaining TemplaVoila</a> is also still on my list, it would be great if you let me know if you find any TemplaVoila related issues with the new TYPO3 version.</p>

<p>If you&rsquo;d like to stay up-to-date with the latest changes in the TYPO3 Core, without reading all the newsgroup messages, you might be interested to use the <a href="http://feeds.feedburner.com/TYPO3-CoreTrunkChangelog">TYPO3 trunk Changelog RSS feed</a>. Besides the feed there&rsquo;s a great service from the Core team, they started to publish the protocol of their weekly meeting as <a href="http://lists.typo3.org/pipermail/typo3-project-v4/2010-November/000996.html">&ldquo;Minutes from the meeting of the release 4.5 team&rdquo;</a> to the typo3.project.v4 newsgroup. I hope this will be kept up in the future.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/10/03/templavoila-1-5-released/">TemplaVoila 1.5 Released</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-10-03T22:31:33+02:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The new version comes with many bugfixes,new features and a closer TYPO3 integration. Overall 95 issues have been resolved in the last 4 months to finalize this versions, some of the highlights are:</p>

<h4>HTML5 support</h4>

<p>The full list of HTML5 tags is now supported in TemplaVoila. The restrictions to specific tags was removed and the TYPO3 integrator is now able to use the full bandwidth of modern HTML. With this change also the tag-icons themself were replaced and the coloring schema was changed. The inspiration for the current color schema came from <a href="http://joshduck.com/periodic-table.html">Josh Duck&rsquo;s &ldquo;Periodic Table of the Elements&rdquo;</a>. In additon same mapping bugs have been resolved too &ndash; for details see <a href="http://bugs.typo3.org/view.php?id=13974">#13974</a> and <a href="http://bugs.typo3.org/view.php?id=14881">#14881</a>.</p>

<p>[caption id=&ldquo;attachment_710&rdquo; align=&ldquo;alignright&rdquo; width=&ldquo;150&rdquo; caption=&ldquo;Page module with TYPO3 4.4 look&amp;feel&rdquo;]<a href="http://blog.tolleiv.de/wp-content/uploads/2010/09/tv15-page-module.png"><img src="http://blog.tolleiv.de/wp-content/uploads/2010/09/tv15-page-module-300x190.png" alt="TemplaVoila 1.5 page module" /></a>[/caption]</p>

<h4>TYPO3 4.4 Look&amp;Feel and docHeader integration</h4>

<p>TYPO3 4.4 introduced a new skin and changed the look&amp;feel in the backend radically. Once installed in 4.4 TemplaVoila 1.5 adjusts it&rsquo;s look and provides the same usability improvements as the official page module. The page-module was optimized to use as much &ldquo;official&rdquo; CSS as possible to support designes with their own backend-skins. In addition to the CSS&amp;Markup changes, TemplaVoila also uses the <a href="http://blog.tolleiv.de/2010/07/typo3-4-4-sprites-in-your-extension/">TYPO3 4.4 SpriteIcon API</a> to provide and retrieve backend icons and uses the FlashMessage API to style all backend notifications.</p>

<p>Another important step was the integration of the so called docHeader. This is the area at the very top of each backend module page which provides useful tools and action-icons. With this version TemplaVoila finally provides docHeaders within every backend-part.</p>

<h4>Improved TYPO3 integration</h4>

<p>Besides the visual changes the general TYPO3 integration has been improved with various modifications.</p>

<p>With the current version there&rsquo;s no need to give &ldquo;Edit page&rdquo; rights to you editors if they want to add or remove content elements. Just the &ldquo;Edit content&rdquo; right and access to the &ldquo;Page>Content&rdquo; field is enough for them. For details see: <a href="http://bugs.typo3.org/view.php?id=3903">#3903</a></p>

<p>The &ldquo;advached header link inclusion&rdquo; is one of the integration steps in the frontend. All resources which are related to an FCE are passed through an TYPO3 API (pageRenderer). This avoids duplicate inclusion of one resource (e.g. CSS files) and enables further post-processing (e.g. compression or merging). It can be enabled using the &ldquo;advancedHeaderInclusion&rdquo; within your TypoScript setup which could then look like this:</p>

<pre><code>page = PAGE
page.typeNum = 0
page.10 = USER
page.10.userFunc = tx_templavoila_pi1-&gt;main_page
page.10.advancedHeaderInclusion= 1
</code></pre>

<hr />

<p>The full list of changes within this version can be found on <a href="http://bugs.typo3.org/search.php?project_id=2&amp;sticky_issues=on&amp;target_version=1.5.0&amp;sortby=last_updated&amp;dir=DESC&amp;hide_status_id=90">bugs.typo3.org</a>.
Many many thanks to all contributors and reviewers &ndash; it&rsquo;s great that more people try to help out and it keeps me motivated to continue improving this great TYPO3 extension.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/09/03/templavoila-on-github-com/">TemplaVoila on github.com</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-09-03T17:52:14+02:00" pubdate data-updated="true">Sep 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Update: Finally TemplaVoila moved to git.typo3.org  &ndash; please read the <a href="http://blog.tolleiv.de/2012/01/templavoila-1-6-x/">update here</a></p></blockquote>

<p>As it seems, souce code version control for TYPO3 will be done with Git in the future. The Phoenix team already uses git.typo3.org, there&rsquo;s also already the possibility to get the latest updates for the v4 Core via <a href="http://github.com/typo3/typo3v4core">github.com</a> and it won&rsquo;t take long until git.typo3.org is been used for version 4 as well.</p>

<p>Due to the fact that my TemplaVoila development <a href="http://blog.tolleiv.de/2010/06/git-svn-for-typo3-extension-development/">workflow is also already git based</a>, I thought it might be interesting for some contributors to develop with a git repository upstream. Therefore I started to maintain a <a href="http://github.com/tolleiv/TemplaVoila">TemplaVoila repository on github.com</a> [1]. The <a href="https://svn.typo3.org/TYPO3v4/Extensions/templavoila/">Subversion repository on forge.typo3.org</a> [2] is of course still the master, but both repositories are kept in sync automatically.</p>

<p>So once you think about sending an RFC to the typo3.team.templavoila list, feel free to attach a git based patch-file.</p>

<p>[1] <a href="http://github.com/tolleiv/TemplaVoila">http://github.com/tolleiv/TemplaVoila</a>
[2] <a href="https://svn.typo3.org/TYPO3v4/Extensions/templavoila/">https://svn.typo3.org/TYPO3v4/Extensions/templavoila/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/08/02/peter-sunde-talking-about-flattr/">Peter Sunde Talking About Flattr</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-08-02T17:11:59+02:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Markus Beckedahl&rsquo;s interview with Peter Sunde brought up some interesting insights into the system of <a href="https://flattr.com/">flattr.com</a> and the idea behind it. So if you&rsquo;re interested in <a href="https://flattr.com/">flattr.com</a> you should  listen the <a href="http://www.netzpolitik.org/2010/npp095-peter-sunde-uber-flattr/">podcast on netzpolitik.org</a>.</p>

<p>My favorite quote:<em>&ldquo;In the end stupid stuff founds good stuff&rdquo;</em> P. Sunde</p>

<p>Another (shorter) interview taken during the Hacknight in Malmö can be found on <a href="http://www.nrli.tv/post/877506283/peter-sunde-discusses-flattr-an-interview-with">nrli.tv</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/07/25/typo3-4-4-sprites-in-your-extension/">TYPO3 4.4 Sprites in Your Extension&#8230;</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-07-25T10:00:29+02:00" pubdate data-updated="true">Jul 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>TYPO3 4.4 ships with a long list of improvements. One of them is the sprite API which was developed during T3UXW09. It extends the iconWorks API and enables to retrieve any backend-icon from a central sprite.</p>

<p>As extension maintainer there are several ways to use these new parts of the API you can either just use it to display core icons, you can include your own icons and retrieve it with the new API or you can include your own sprite and retrieve the separate icons.</p>

<h4>Use sprite icons</h4>

<p>Using sprite icons is pretty easy, to get a checkmark icon you could use this:</p>

<pre><code>t3lib_iconWorks::getSpriteIcon('status-dialog-ok');
</code></pre>

<p>The list of all available icons can be retrieved using the &lsquo;<strong><a href="http://typo3.org/extensions/repository/view/spriteiconoverview/current/">spriteiconoverview</a></strong>&rsquo; extension which I just recently pushed into the TER ;)</p>

<h4>Add your own icons</h4>

<p>The API also provides the possibility to include your extension&rsquo;s icons using either single icons or your own icon sprite.
Using single icons can be done with the following code in your ext_tables.php or ext_localconf.php:</p>

<pre><code>$icons = array(
     'myicon' =&gt; t3lib_extMgm::extRelPath('myextension') . 'myicon.gif'
);
t3lib_SpriteManager::addSingleIcons($icons, 'myextension');
</code></pre>

<p>Using this icon is easy again:</p>

<pre><code>t3lib_iconWorks::getSpriteIcon('extensions-myextension-myicon');
</code></pre>

<p>If your extension comes with a larger amount of icons you might want to use your own sprite. This includes your sprite as a image file and a CSS file. The css file should look like this:</p>

<pre><code>.t3-icon-extensions-myextension {
     background-image:url(../../typo3conf/ext/myextension/myextension_sprite.gif);
}
.t3-icon-extensions-myextension-icon1 { background-position: 0px 0px; }
.t3-icon-extensions-myextension-icon2 { background-position: 0px -16px; }
</code></pre>

<p>The path to your sprite needs to be relative to the typo3temp/sprites/ folder, from where the (temporary) merged CSS file will be included.
This sprite can be included using:</p>

<pre><code>$icons = array(
     'extensions-myextension-icon1',
     'extensions-myextension-icon2'
);
t3lib_SpriteManager::addIconSprite(
     $icons,
     t3lib_extMgm::siteRelPath('myextension') . 'myextension_sprite.css'
);              
</code></pre>

<p>As you see it&rsquo;s quite easy to include the new API, the API provides some further options for overlays and further modifications which I didn&rsquo;t mention here. And as a final motivation this is a comparison between old and new API to get a &ldquo;back&rdquo; button:</p>

<pre><code>// old API
$icon = '&lt;img' . t3lib_iconWorks::skinImg($this-&gt;doc-&gt;backPath,'gfx/goback.gif','width="14" height="14"') . 'alt="" /&gt;';

// new API
$icon = t3lib_iconWorks::getSpriteIcon('actions-view-go-back');
</code></pre>

<hr />

<p>The sprite API is quite new and my knowledge about how to use it is also relatively fresh &ndash; so please let me know if you&rsquo;ve any remarks or questions.</p>

<h2>Btw. special kudos for his involvement during the implementation of this nice feature and many many thanks for helping me to understand it, to <a href="http://www.rs-websystems.de/">Steffen Ritter</a>  :)</h2>

<p>Further reading:</p>

<ul>
<li><p>If you&rsquo;ve never heard of sprites you might want to read this article an <a href="http://www.alistapart.com/articles/sprites">alistapart.com</a></p></li>
<li><p><a href="http://typo3.org/download/release-notes/typo3-44/">TYPO3 4.4 release notes</a></p></li>
<li><p><a href="http://news.typo3.org/news/article/t3dd10-its-all-about-sprites/">news.typo3.org &ndash; T3DD10: It&rsquo;s all about sprites</a></p></li>
<li><p><a href="http://typo3.org/extensions/repository/view/spriteiconoverview/current/">spriteiconoverview</a> extension</p></li>
</ul>


<hr />
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/07/09/t3dd10-git-workshop/">T3DD10 Git Workshop</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-07-09T00:11:29+02:00" pubdate data-updated="true">Jul 9<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just found that <a href="http://www.xing.com/profile/Peter_Niederlag">Peter</a> shares the slides of the Git workshop from the T3DD10 on <a href="http://www.slideshare.net/jugglefish/t3dd10-git">slideshare</a>. Since this 4 hour workshop was &ndash; for many reasons &ndash; one of my favorites during the T3DD10, I felt that it&rsquo;s worth to mention it. And due to the fact that TYPO3 is moving very fast towards Git it&rsquo;s worth to look at them ;) &mdash;&ndash; <a href="http://www.slideshare.net/jugglefish/t3dd10-git">Open workshop slides</a></p>

<p>Btw. at the beginning I didn&rsquo;t belief that a Git workshop could fill 4 hours &ndash; now I don&rsquo;t think that shorter workshops make any sense :P</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/06/30/git-svn-for-typo3-extension-development/">Using Git Svn for TYPO3 Extension Development</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-06-30T08:00:30+02:00" pubdate data-updated="true">Jun 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When I first saw a presentation about Git 2 years ago I liked it, but I was convinced that Subversion covers all I need. Things have changed and especially the bad performance of Subversion for larger repositories and the need to commit things without messing up the official trunk motivated me to look up how to get started with Git. If you need more reasons why you should look into Git, you&rsquo;ll find them in [7] &ndash; anyways it&rsquo;s worth to have a look how I managed to work with it ;)</p>

<p>There are basically 2½ different tasks during the &ldquo;daily&rdquo; development.</p>

<ol>
<li><p> <em>Create a local working copy a.k.a clone the repository</em></p></li>
<li><p> Fix a bug or implement a feature and create a patch file with the changes</p></li>
<li><p> Receive a patch and review it &ndash; eventually commit the changes</p></li>
</ol>


<h4>0. Repository initialization</h4>

<p>Getting started and creating the repository from an existing Subversion repository looks like this:</p>

<pre><code>mkdir templavoila
cd templavoila
git svn init -t tags -b branches -T trunk https://svn.typo3.org/TYPO3v4/Extensions/templavoila
git-svn fetch
</code></pre>

<p>This will pull the entire SVN history into your local Git repository &ndash; use &ldquo;git-svn fetch -r &rdquo; to reduce the amount of imported revisions.</p>

<p>To keep your repository up-to-date you need these commands:</p>

<pre><code>git stash
git-svn fetch
git rebase trunk
git stash apply
</code></pre>

<p>If you followed the SVN trunk/tags/branches convention you should see that it also finds tags and branches during the import. But using &ldquo;git branch&rdquo; afterwards you&rsquo;ll see that there&rsquo;s only one local branch called &ldquo;master&rdquo;. That&rsquo;s where Git shows it&rsquo;s strength the first time, because it distinguishes between local and remote branches. Work can only be done within local branches, whereas the existing SVN branches are only recognized as &ldquo;remote&rdquo; branches so far. To list all remote branches you can use &ldquo;git branch -r&rdquo;. If you followed the trunk/tags/branches convention, you should see your SVN tags and branches within this list &ndash; otherwise you might want to read [8]. To make a remote (SVN) branch available in your local repository use:</p>

<pre><code>git checkout --track -b tv_1-4 templavoila_1-4
</code></pre>

<h4>1. Working with the repository</h4>

<p>Starting to work on a new feature or a bug always starts with a new branch in git:</p>

<pre><code>git branch issue00012345
git checkout issue00012345
</code></pre>

<p>You&rsquo;re now working in the &ldquo;issue00012345&rdquo; branch and all commits will just be committed to that branch. Once you made changes  you can either just commit all modifications with:</p>

<pre><code>git commit -a
</code></pre>

<p>or add particular files and commit only these files with:</p>

<pre><code>git add fileA
git add fileB
git commit
</code></pre>

<p>or with a nice pre commit preview which lets you decide which lines you want to commit:</p>

<pre><code>git add --patch
git commit
</code></pre>

<p><strong>Preparing the patch for the mailingslist:</strong>
In a pure Git workflow &ldquo;git format-patch&rdquo; is used to communicate patches, but due to the fact that there&rsquo;s a Subversion repository involved either the old style diff / patch or a workaround needs to be used to communicate changes.
Creating a patch which works for the mailinglist can basically be done using:</p>

<pre><code>git diff --no-prefix master &gt; myPatchFile.patch
</code></pre>

<p>An alternative workaround to create proper SVN diff files (including svn revision etc..) can be found in [10] it&rsquo;s used very straight forward:</p>

<pre><code>git svn-diff &gt; mySvnPatchFile.patch
</code></pre>

<h4>2. Review and commit patches</h4>

<p><strong>Reviewing the patch someone sent to the list:</strong>
As &ldquo;usual&rdquo;</p>

<pre><code>patch -p0 &lt; myPatchFile.patch
</code></pre>

<p>can be used to apply patch files.</p>

<p>Once the files passed the review the changes can be committed using &ldquo;<strong>git add</strong>&rdquo; and &ldquo;<strong>git commit</strong>&rdquo; as shown before.</p>

<p><strong>Committing to Subversion:</strong>
Once you committed everything to your local repository you&rsquo;re able to perform this command to &ldquo;forward&rdquo; your commits to the Subversion repository.</p>

<pre><code>git svn dcommit
</code></pre>

<p>Practically every single commit within git will also be reflected as a single Subversion commit. For several reason this might not always suit your situation.As a workaround you could merge all commits during the merge of your feature branches into the master branch using:</p>

<pre><code>git merge --commit --squash issue00012345
git svn dcommit
</code></pre>

<p>Of course I don&rsquo;t recommend to do this for your regular work since have small granular commits is always better.</p>

<h4>Sources and further reading</h4>

<p>[1] <a href="http://spyced.blogspot.com/2009/06/patch-oriented-development-made-sane.html">Patch-oriented development made sane with git-svn</a>
[2] <a href="http://utsl.gen.nz/talks/git-svn/intro.html#using">An introduction to git-svn for Subversion/SVK users and deserters</a>
[3] <a href="http://git-scm.org/course/svn.html">Git &ndash; SVN Crash Course</a>
[4] <a href="http://trac.parrot.org/parrot/wiki/git-svn-tutorial">Getting the GIT checkout</a>
[5] <a href="http://nathanj.github.com/gitguide/tour.html">An Illustrated Guide to Git on Windows</a>
[6] <a href="http://stackoverflow.com/questions/1129688/git-svn-workflow-feature-branches-and-merge">git svn workflow &ndash;
feature branches and merge</a>
[7] <a href="http://whygitisbetterthanx.com/#any-workflow">whygitisbetterthanx.com</a>
[8] <a href="http://www.dmo.ca/blog/20070608113513/">Multiple branches using git-svn</a>
[9] <a href="http://www.viget.com/extend/effectively-using-git-with-subversion/">Effectively using Git with subversion</a>
[10] <a href="http://mojodna.net/2009/02/24/my-work-git-workflow.html">Git Workflow with Upstream SVN</a></p>

<h4>Notes</h4>

<ul>
<li><p>Don&rsquo;t try to dcommit to <a href="https://svn.typo3.org/TYPO3v4/Extensions/templavoila">https://svn.typo3.org/TYPO3v4/Extensions/templavoila</a> unless you know what you&rsquo;re doing &ndash; I just used it to show you that it&rsquo;s even working with large history projects.</p></li>
<li><p>For projects hosted on forge.typo3.org there might be a native git support soon &ndash; stay tuned</p></li>
<li><p>Let me know if you had problems with any of the snippets</p></li>
<li><p>Further information about the review process for the TYPO3 Core and several other TYPO3 related projects can be found on <a href="http://typo3.org/teams/core/resources/maintenance-policy/">typo3.org</a></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2010/06/15/typo3-workspaces/">TYPO3 Workspaces</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2010-06-15T19:54:47+02:00" pubdate data-updated="true">Jun 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the enterprise features TYPO3 has to offer is versioning and workspace handling. <a href="http://typo3.org/community/people/kaspers-korner/">Kasper</a> did a great job when he initially brough these featues into TYPO3. Unfortunately during the last years they became orphans and nobody really took care of them. There are multiple reasons for that, one was that Kasper didn&rsquo;t allow big changes, another one was that everyone was somehow able to live with the existing odds they had but probable the most important one was that it was just to complicated to improve them alone without knowing the big picture.</p>

<p>The good news is that these times are over and that some important changes to improve workspace handling are planned for
 the upcomming TYPO3 4.5 (read more on <a href="http://news.typo3.org/news/article/bringing-workspaces-up-to-speed/">TYPO3.org</a>) and the cool news is that I was lucky enough to be part of that team and that I was able to attend a great &ldquo;kickoff&rdquo; meeting two weeks ago.</p>

<p>What changes we plan can be found on <a href="http://news.typo3.org/news/article/bringing-workspaces-up-to-speed/">TYPO3.org</a>, a detailed protocol of the meeting can be found <a href="http://forge.typo3.org/attachments/download/3190/2010-06-01_TYPO3_Versioning_and_Workspaces_Meeting.pdf">here</a> in addition.</p>

<p>I&rsquo;m happy to be part of that and I hope everyone on the team can keep up his/her motivation.</p>

<p><em>Update see <a href="http://news.typo3.org/news/article/t3dd10-workspace-progress/">typo3.org</a></em></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/14/templavoila-followup/">TemplaVoila - followup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/08/templavoila-future/">TemplaVoila future</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/06/genetic-algorithms-boosting-solr/">Using genetic algorithms to optimize Apache Solr boost factors.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/22/re-how-to-move-on-typo3/">Re: How to move on? #TYPO3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/10/typo3-login-state-and-varnish-cache/">TYPO3 login state and Varnish cache</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Tolleiv Nietsch <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
