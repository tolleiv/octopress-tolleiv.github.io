
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>the fancy part of the web</title>
  <meta name="author" content="Tolleiv Nietsch">

  
  <meta name="description" content="I just found this line: set_error_handler(create_function(&lsquo;$x, $y&rsquo;, &lsquo;throw new Exception($y, $x);&rsquo;), E_ALL~E_NOTICE); in the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tolleiv.github.io/blog/page/11">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="the fancy part of the web" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tolleiv.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/error_reposting-and-exceptions/">Error_reposting and Exceptions&#8230;.</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-20T23:40:00+02:00" pubdate data-updated="true">May 20<span>th</span>, 2008</time>
        
         | <a href="/2008/05/error_reposting-and-exceptions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just found this line:</p>

<p>set_error_handler(create_function(&lsquo;$x, $y&rsquo;, &lsquo;throw new Exception($y, $x);&rsquo;), E_ALL~E_NOTICE);</p>

<p>in the comments on php.net and did a short test to see whether it works. Normally I used to have a global function which passes all the errors through a logging-chain (FILE/MAIL/DISPLAY) but having exceptions could be more comfortable because you might sometimes want to make decisions locally and not on a global scope and just setting and re-setting the error-handler is not the best idea for this&hellip; I&rsquo;m not sure if I get used to it, because the error-handling function did a good job for the last years &hellip; we&rsquo;ll see :)<br/>
So that&rsquo;s the full example code:</p>

<p>set_error_handler(create_function(&lsquo;$x, $y&rsquo;, &lsquo;throw new Exception($y, $x);&rsquo;), E_ALL);<br/>
try {</p>

<p>$errors = array(</p>

<pre><code>                E_USER_WARNING =&gt; "something might be wrong",  
                E_USER_NOTICE =&gt; "it works but I don't like it",  
                E_USER_ERROR =&gt; "something went completly wrong",  
</code></pre>

<p>);</p>

<p>//    echo $name; //should cause a E_NOTICE</p>

<p>foreach($errors as $code=>$msg) {</p>

<pre><code>try {  
    trigger_error($msg,$code);  
}  
catch (Exception $e) {  
    if(!in_array($e-&gt;getCode(),array(E_USER_WARNING,E_USER_NOTICE))) {  
        throw $e;  
    }  
    else {  
        // not a big deal we can push this into a log-file and continue or work...  
        echo "local exception: (".$e-&gt;getCode(). ") ".$e-&gt;getMessage()."&lt;br/&gt;";  
    }   
}  
</code></pre>

<p>}</p>

<p>}<br/>
catch (Exception $e) {<br/>
echo &ldquo;global exception:&rdquo;.$e->getMessage().&ldquo;<br/>&rdquo;;<br/>
}</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/preview-to-php-5-3/">Preview to PHP 5.3</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-19T07:15:00+02:00" pubdate data-updated="true">May 19<span>th</span>, 2008</time>
        
         | <a href="/2008/05/preview-to-php-5-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the mayor updates since PHP 5.0 is upcoming with the 5.3 version, this is also a major step forward to PHP 6 &ndash; I love to have namespaces and appreciate the split of E_NOTICE and E_DEPRECATED. Also other features like the native MySQL support ( I hope this really raises the performance), the array_replace/array_replace_recursive functions and also dynamic calls to static functions &ldquo;$classname::$functionname($parameter);&rdquo; sound very cool. So I really look forward to have it on the server (or at least on my laptop) :P</p>

<p>Regarding the namespaces I&rsquo;ve one idea: maybe someday someone will invent a common namespace &ldquo;php::clean&rdquo; which fixes all the small inconsistencies within function-names and parameter-styles &hellip; that would be really great ;)</p>

<p>A nice article with a more detailed look into namespaces and the other inventions in 5.3 can be found on <a href="http://www.sitepoint.com/article/whats-new-php-5-3">sitepoint.com</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/firefox-3-rc1/">Firefox 3 RC1</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-18T18:11:00+02:00" pubdate data-updated="true">May 18<span>th</span>, 2008</time>
        
         | <a href="/2008/05/firefox-3-rc1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just saw that the first Release Candidate of Firefox 3 is available for <a href="http://www.mozilla.com/en-US/firefox/all-rc.html">download</a> . As with the most of the Beta-versions I also checked this update because I&rsquo;m really excited to get the <a href="http://www.mozilla.com/en-US/firefox/3.0rc1/releasenotes/#whatsnew">new features</a>, but after 5 minutes (again) I removed it from my PC. Non of my extensions is working in FF3 (except the dictionary), it still destroys the Frames in TYPO3 (<a href="http://typo3.org/extensions/repository/view/mn_ff3_be_bugfix/0.0.2/">there&rsquo;s a bugfix-extension for that</a>) and the memory-usage is still very high,10% lower than in FF2 but still high.<br/>
So I postponed the update and  kept on running <a href="http://www.mozilla.com/en-US/firefox/all.html">Firefox 2</a>, at least until the next Release Candidate ;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/using-mocks-within-tests/">Using Mocks Within Tests</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-17T22:02:00+02:00" pubdate data-updated="true">May 17<span>th</span>, 2008</time>
        
         | <a href="/2008/05/using-mocks-within-tests/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&rsquo;s say you have some kind of process which creates cookies and which requires the cookies to bake before you deliver them to the customers. This process somehow touches two kinds of objects the cookie itself and a object which performs the process &ndash; the cookie oven.
When you start to develop the oven how do you check whether the cookies are really baked or not? Since you can&rsquo;t get rid of the dependency between the oven and the cookie, you have to simulate a real object and do the checks by hand &ndash; but wait there&rsquo;s already a way to resolve it:
PHPUnit ships with a very nice and comfortable function to create and check mock-objects and that&rsquo;s exactly what we need in this situation where we somehow need to find out if our cookie really gets baked.
The testcase for this scenario could look like this:</p>

<pre><code>class TestCookieOven extends PHPUnit_Framework_TestCase {
    public function testIfCookieIsBakenWithinFinishing() {
        /* create the mock and expect the
        bakeIt method to be called at least once */
        $cookiemock = $this-&gt;getMock(‘Cookie’, array(‘bakeIt’));
        $cookiemock-&gt;expects($this-&gt;once())-&gt;method(‘bakeIt’);

        /* create the observed object and perform the required steps */
        $cookieoven = new CookieOven();
        $cookieoven-&gt;finishCookie($cookiemock);
    }
}
</code></pre>

<p>This first creates a mock and assigns the expectation that the &ldquo;bakeIt&rdquo;-function is called exactly once. [ beside the &ndash;>once()-call there are some alternatives: &ndash;>any(), &ndash;>never(), &ndash;>atLeastOnce(), &ndash;>exactly(int $count) and &ndash;>at(int $index) ]. Then it passes the mock to the oven and performs the method we want to check. To make this test green you need at least this:</p>

<pre><code>CookieOven {
    /**
    * Takes a cookie and prepares it to be ready
    * for a customer
    *
    * @param Cookie $cookie
    */
    public function finishCookie(Cookie $cookie) {
        $cookie-&gt;bakeIt();
    }
}
</code></pre>

<p>So as soon you have these lines you have a green test and that&rsquo;s great because there is no need to have a real &ldquo;cookie&rdquo; class &ndash; someone else can take care of the cookies &ndash; oh wait &hellip; I&rsquo;d better do this myself :P</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/typo3-api/">TYPO3 API&#8230;</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-15T16:40:00+02:00" pubdate data-updated="true">May 15<span>th</span>, 2008</time>
        
         | <a href="/2008/05/typo3-api/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The API documentation on <a href="http://typo3.org/fileadmin/typo3api-4.0.0/">typo3.org</a> is not very up-to-date, but the typo3-unleashed.net guys just provided some links to the API documentation of the current TYPO3 versions &ndash; <a href="http://www.typo3-unleashed.net/api_online.html">http://www.typo3-unleashed.net/api_online.html</a> &ndash; thanks a lot :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/specification-ddd/">Specification [DDD]</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-15T16:00:00+02:00" pubdate data-updated="true">May 15<span>th</span>, 2008</time>
        
         | <a href="/2008/05/specification-ddd/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Maybe sometimes the cookie tin is filled with all sorts of cookies and only some of them are what you&rsquo;d like in this special moment. Often it&rsquo;s very easy to specify which cookie you like, but sometimes your wishes are very complex, for example if you look for grannies special cookie with chocolate, coconut and vanilla crumbles. This could lead into a real crumby problem if you try to sort all the cookies and then select eat the right one.</p>

<p>In the world of OOP it&rsquo;s often much harder to collect a few objects out of a large number of different objects, also combining different requirements isn&rsquo;t easy and that&rsquo;s where the specification pattern can help you out. It implements some basic operations to combine requirements (AND, OR, NOT) and the only thing a concrete specification for a concrete class has to do is to implement a method (isSatisfied()) which is able to determine whether a object meats a requirement or not.</p>

<p>I splitted the generic part of the script and the cookie-example. The first part just implements the methods which are needed for the combination and provides a abstract class which is extended by the specifications in the second part. As you see the specification is combined which normally encapsulates the retrieval of the objects ,for example from a database. &hellip;.just have a look it&rsquo;s really easy to select the right cookie &hellip; yummy</p>

<p><a href="http://bp2.blogger.com/_l5fIZzJyYfc/SC115dPibfI/AAAAAAAAABQ/ZZfCsWJAwDA/s1600-h/specification_sequenze.png"><img src="http://bp2.blogger.com/_l5fIZzJyYfc/SC115dPibfI/AAAAAAAAABQ/ZZfCsWJAwDA/s400/specification_sequenze.png" alt="" /></a></p>

<pre><code>interface Specification {
    public function isSatisfiedBy($obj);
    public function _and(Specification $spec);
    public function _or(Specification $spec);
    public function _not();
}

abstract class AbstractSpecification implements Specification {
    public function isSatisfiedBy($obj) { }
    public function _and(Specification $spec) {
        return new AndSpecification($this, $spec);
    }
    public function _or(Specification $spec) {
        return new OrSpecification($this, $spec);
    }
    public function _not() {
        return new NotSpecification($this);
    }
}

class AndSpecification extends AbstractSpecification {
    private $spec1, $spec2;
    public function __construct(Specification $spec1, Specification $spec2) {
        $this-&gt;spec1 = $spec1;
        $this-&gt;spec2 = $spec2;
    }
    public function isSatisfiedBy($obj) {
        return $this-&gt;spec1-&gt;isSatisfiedBy($obj) &amp;&amp; $this-&gt;spec2-&gt;isSatisfiedBy($obj);
    }
}

class OrSpecification extends AbstractSpecification {
    private $spec1, $spec2;
    public function __construct(Specification $spec1, Specification $spec2) {
        $this-&gt;spec1 = $spec1;
        $this-&gt;spec2 = $spec2;
    }
    public function isSatisfiedBy($obj) {
        return $this-&gt;spec1-&gt;isSatisfiedBy($obj) || $this-&gt;spec2-&gt;isSatisfiedBy($obj);
    }
}

class NotSpecification extends AbstractSpecification {
    private $spec;
    public function __construct(Specification $spec) {
        $this-&gt;spec = $spec;
    }
    public function isSatisfiedBy($obj) {
        return !$this-&gt;spec-&gt;isSatisfiedBy($obj);
    }
}






/**
* Cookie object just a container for the relevant data.
*
*/
class Cookie {
    protected $name,$flavor,$size;
    public function __construct($name=”,$flavor=‘chocolate’,$size=100) {
    $this-&gt;name=$name;
    $this-&gt;flavor = $flavor;
    $this-&gt;size = abs($size); // avoid negative size
    }
    public function getName() { return $this-&gt;name; }
    public function getFlavor() { return $this-&gt;flavor; }
    public function getSize() { return $this-&gt;size; }
}
/**
* Cookie service delivers cookies, offers some ways to select specific types of cookies
*
*/
class CookieService {
    protected $cookies = array();
    /**
    * Add a cookie to the collection
    * name is used as identifier, thats not the best choice
    * but it’s ok for the example
    *
    * @param Cookie $cookie
    */
    public function add(Cookie $cookie) {
        $this-&gt;cookies[$cookie-&gt;getName()]=$cookie;
    }
    /**
    * Generic method to check which objects fit the spec
    *
    * @param Specification $spec
    */
    private function filter(Specification $spec) {
        $result=array();
        reset($this-&gt;cookies);
        foreach($this-&gt;cookies as $name=&gt;$cookie) {
            if($spec-&gt;isSatisfiedBy($cookie)) {
                $result[]=$cookie;
            }
        }
        return $result;
    }

    public function getLargeCookies() {
        $spec = new SmallCookieSpecification();
        $spec = $spec-&gt;_not();
        return $this-&gt;filter($spec);
    }
    public function getSmallChocolateCookies() {
        $spec = new SmallCookieSpecification();
        $spec = $spec-&gt;_and(new ChocolateCookieSpecification());
        return $this-&gt;filter($spec);
    }
    public function loadDummyData() {
        $this-&gt;add(new Cookie(‘Granny\’s classic’,‘chocolate’,60));
        $this-&gt;add(new Cookie(‘Modern Jumbo’,‘moca,chocolate’,180));
        $this-&gt;add(new Cookie(‘Kitchen Sink’,‘macadamia,cranberrie’,90));
        $this-&gt;add(new Cookie(‘Vanilla Cloud’,‘vanilla’,120));
        $this-&gt;add(new Cookie(‘Chocolate chip’,‘coconut,chocolate’,160));
    }
}

class SmallCookieSpecification extends AbstractSpecification {
    public function isSatisfiedBy($obj) {
        return $obj-&gt;getSize() &lt; 100;
    }
}

class ChocolateCookieSpecification extends AbstractSpecification {
    public function isSatisfiedBy($obj) {
        return stristr(strtolower($obj-&gt;getFlavor()),‘chocolate’) !== FALSE;
    }
}

/**
* Client code
*/
$service = new CookieService();
$service-&gt;loadDummyData();
echo ‘

’;
var_dump($service-&gt;getLargeCookies());
var_dump($service-&gt;getSmallChocolateCookies());
echo ‘
</code></pre>

<p>’;</p>

<p><a href="http://martinfowler.com/apsupp/spec.pdf">more information by E.Evans and M.Fowler</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/homer-simpson-as-ascii-art/">Homer Simpson as ASCII-Art</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-15T00:02:00+02:00" pubdate data-updated="true">May 15<span>th</span>, 2008</time>
        
         | <a href="/2008/05/homer-simpson-as-ascii-art/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The rebirth of ASCII-Art that&rsquo;s how one of the comments called it &ndash; Homer-Simpson as ASCII-Art with modern and valid CSS &ndash; that&rsquo;s so awesome: <a href="http://www.romancortes.com/blog/homer-css/">http://www.romancortes.com/blog/homer-css/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/t3dd08/">T3DD08</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-14T00:15:00+02:00" pubdate data-updated="true">May 14<span>th</span>, 2008</time>
        
         | <a href="/2008/05/t3dd08/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The last weekend was great, I joined the T3DD in Elmshorn, Germany and meet a lot of interesting people, the beer was cheap and the weather was amazing. So I&rsquo;m looking forward to the T3CON in autumn&hellip;  :)</p>

<p>It also seems that some of the guys got some new spirit &ndash; today 4 official and some inofficial bugs in some extensions had been fixed in a very short sequence &hellip; great!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/memento-gof/">Memento [GoF]</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-13T09:59:00+02:00" pubdate data-updated="true">May 13<span>th</span>, 2008</time>
        
         | <a href="/2008/05/memento-gof/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&rsquo;s say you got a cookie from a repository your granny and you&rsquo;re not sure if you like the new taste. Wouldn&rsquo;t it be cool if you could just try it and revoke the operation first bite if you don&rsquo;t like it?</p>

<p>In the world of OOP thats a easy job which can be handled by the so called memento pattern &ndash; you just save the inner state of the object  within a memento object and revoke you actions whenever you like&hellip;</p>

<p>As UML the example looks like this:
<a href="http://bp2.blogger.com/_l5fIZzJyYfc/SClV6dPibdI/AAAAAAAAABA/bFyT-BEsqrU/s1600-h/memento-pattern.png"><img src="http://bp2.blogger.com/_l5fIZzJyYfc/SClV6dPibdI/AAAAAAAAABA/bFyT-BEsqrU/s400/memento-pattern.png" alt="" /></a>
Show PHP Source Code</p>

<pre><code>class CookieMemento {
    protected $flavor,$size;    
    public function __construct($flavor,$size=100) {
        $this-&gt;flavor=$flavor;
        $this-&gt;size=$size;
    }
    public function getMemento() {
        return new CookieMemento($this-&gt;flavor,$this-&gt;size);
    }
    public function setMemento(CookieMemento $memento) {
        $this-&gt;flavor=$memento-&gt;flavor;
        $this-&gt;size=$memento-&gt;size;
    }    
}

class Cookie extends CookieMemento {

    public function eat($reduceValue) {     
        $this-&gt;size-=($reduceValue&gt;$this-&gt;size)?$this-&gt;size:$reduceValue;        
    }    

    public function printStatus() {
        echo ‘This cookie is a ’.$this-&gt;flavor.‘ cookie which has a size of ’.$this-&gt;size.‘.&lt;br&gt;&lt;/br&gt;’;
    }
}

class Client { 
    public function run() {
        $theCookie = new Cookie(‘chocolate’,100);
        $theMemento = $theCookie-&gt;getMemento();
        echo $theCookie-&gt;printStatus();        
        $theCookie-&gt;eat(50);
        echo $theCookie-&gt;printStatus();       
        $theCookie-&gt;eat(50);
        echo $theCookie-&gt;printStatus();       
        echo ‘Hm I\’d like to eat it again …. *grin*&lt;br&gt;&lt;/br&gt;’;
        $theCookie-&gt;setMemento($theMemento);
        echo $theCookie-&gt;printStatus();
        echo ‘ *biggrin* ’;
    }
}

$cookieMonster = new Client();
$cookieMonster-&gt;run();
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/2008/05/decorator-gof/">Decorator [GoF]</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2008-05-13T00:59:00+02:00" pubdate data-updated="true">May 13<span>th</span>, 2008</time>
        
         | <a href="/2008/05/decorator-gof/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As the first pattern I&rsquo;d like to introduce the decorator pattern &ndash; it&rsquo;s one of the [GoF]&ndash; structural patterns. It enables to extend the functionality of a existing method by wrapping a so called decorator-object.</p>

<p>So maybe you already know the situation ;) , your granny  is going to bake cookies and you think of how they gonna taste &ndash; so cookie is our main-object and the different additional spices and other options which refine the taste of the cookies are the decoration for it. The cookies, pardon main-objects, are fine without the decoration but they&rsquo;re much better with and the best thing is that you&rsquo;re able to combine the decorations&hellip; yummy</p>

<p>So that&rsquo;s how this would look like more technically:
<a href="http://bp2.blogger.com/_l5fIZzJyYfc/SCjU0tPibZI/AAAAAAAAAAU/uuR_geevSdw/s1600-h/decorator-pattern.png"><img src="http://bp2.blogger.com/_l5fIZzJyYfc/SCjU0tPibZI/AAAAAAAAAAU/uuR_geevSdw/s400/decorator-pattern.png" alt="" /></a></p>

<pre><code>stract class Cookie {
    protected $flavor;
    public function __construct($flavor) {
        $this-&gt;flavor=$flavor;
    }    
    abstract public function descripeFlavor();
}

class GrannysCookie extends Cookie {
    public function descripeFlavor() {
        echo ‘&lt;br&gt;&lt;/br&gt;Granny baked a cookie which has a taste of ’;
        echo $this-&gt;flavor;
    }
}

abstract class CookieDecorator extends Cookie {
    protected $cookie;
    public function __construct(Cookie $cookie) {
        $this-&gt;cookie = $cookie;
    }    
    //abstract public function descripeFlavor();    
}

class FreshCookieDecorator extends CookieDecorator {
    public function descripeFlavor() {
        $this-&gt;cookie-&gt;descripeFlavor();
        echo ‘ which smells fresh from the oven’;
    }
}

class CrumbleCookieDecorator extends CookieDecorator {
    public function descripeFlavor() {        
        $this-&gt;cookie-&gt;descripeFlavor();
        echo ‘ it has tasty crumbles ’;
    }
}

$cookie = new GrannysCookie(‘chocolate’);
$cookie-&gt;descripeFlavor();

$crumbleCookie = new CrumbleCookieDecorator($cookie);
$crumbleCookie-&gt;descripeFlavor();

$freshCookie = new FreshCookieDecorator($cookie);
$freshCookie-&gt;descripeFlavor();

$freshAndCrumbledCookie = new FreshCookieDecorator($crumbleCookie);
$freshAndCrumbledCookie-&gt;descripeFlavor();
</code></pre>

<p><a href="http://en.wikipedia.org/wiki/Decorator_pattern">additional Information</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/06/templavoila-followup/">TemplaVoila - followup</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/templavoila-future/">TemplaVoila future</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/genetic-algorithms-boosting-solr/">Using genetic algorithms to optimize Apache Solr boost factors.</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/re-how-to-move-on-typo3/">Re: How to move on? #TYPO3</a>
      </li>
    
      <li class="post">
        <a href="/2012/12/typo3-login-state-and-varnish-cache/">TYPO3 login state and Varnish cache</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/tolleiv">@tolleiv</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tolleiv',
            count: 1,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Tolleiv Nietsch <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tolleiv';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
